!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.ImgManager=t()}(this,function(){"use strict";var e={},t=[],n="";function i(t,n){let i=o(t,n);return e[i.id]?e[i.id]:new Promise(function(t,n){let r=new Image;r.src=i.src,e[i.id]=r;let o=function(){r.removeEventListener("load",o),t(r)};r.addEventListener("load",o)})}function r(t,n){let i=o(t,n);if(e[i.id])return e[i.id];{let t=new Image;return t.src=i.src,e[i.id]=t,t}}function o(e,t){let i={src:"",id:"",http:!1};return i.http="http"==e.slice(0,4),i.src=i.http?e:n+e,i.id=""==t?e:t,i}return{load:function(e){return function e(n){if("string"==typeof n)t.push(i(n,""));else if(Array.isArray(n))for(let t of n)e(t);else if("object"==typeof n){let e=Object.keys(n)[0];t.push(i(n[e],e))}}(e),Promise.all(t)},get:function(t,n){return e[t]?e[t]:r(n?{key:n}:t)},setMainDirectory:function(e){"string"==typeof e&&(n=e)}}});
