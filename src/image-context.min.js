!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.ImageContext=t()}(this,function(){"use strict";var e={},t=[],r="";function n(t,r){var n=Array.isArray(t)?i(t[0],t[1]):i(t);if(e[n.id])return e[n.id];var o=new Image;return o.src=n.src,e[n.id]=o,r?o:new Promise(function(e,t){var r=function(){o.removeEventListener("load",r),e(o)};o.addEventListener("load",r)})}function i(e,t){return{src:"http"==e.slice(0,4)?e:r+e,id:t=t?e:t}}return{load:function(e){return function e(t){if("string"==typeof t)n(t,!1);else if(Array.isArray(t))for(var r of t)e(r);else if("object"==typeof t){var i=Object.keys(t)[0];n([t[i],i],!1)}}(e),Promise.all(t)},get:function(t){if(e[t])return e[t];if("string"==typeof t)return n(t,!0);if("object"==typeof t){var r=Object.keys(t)[0];return n([t[r],r],!0)}},setDirectory:function(e){"string"==typeof e&&(r=e)}}});
